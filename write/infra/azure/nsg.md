# NSG란

네트워크에서 NSG 규칙은 Network Security Group 규칙을 의미한다.&#x20;

Network Security Group (NSG)은 Azure와 같은 클라우드 환경에서 가상 네트워크의 보안을 관리하는 기능이다.&#x20;

NSG 규칙은 네트워크 트래픽을 제어하고 특정 IP 주소나 포트에서 들어오고 나가는 트래픽을 허용하거나 차단하는 규칙을 정의하는데 마치 방화벽과 유사하다고 생각된다.

NSG 규칙의 주요 개념은 다음과 같다:

1. **인바운드 규칙(Inbound Rules)**:
   * 외부에서 내부로 들어오는 트래픽을 제어
   * 특정 IP 주소, 포트, 프로토콜(예: TCP, UDP)을 기반으로 트래픽을 허용하거나 차단
2. **아웃바운드 규칙(Outbound Rules)**:
   * 내부에서 외부로 나가는 트래픽을 제어
   * 특정 IP 주소, 포트, 프로토콜을 기반으로 트래픽을 허용하거나 차단
3. **우선 순위(Priority)**:
   * 각 규칙에는 우선 순위가 부여된다. 숫자가 낮을수록 높은 우선 순위를 갖는다.
   * 높은 우선 순위(숫자가 낮은 규칙)가 먼저 평가되며, 일단 해당 규칙이 적용되면 더 낮은 우선 순위의 규칙은 평가되지 않는다.
4. **기본 규칙(Default Rules)**:
   * NSG에는 기본적으로 제공되는 규칙들이 있다. 예를 들어, Azure는 기본적으로 VNet 내부 통신을 허용하고, 인터넷으로부터 들어오는 모든 트래픽을 차단하는 등의 기본 규칙을 가지 있다.
   * 사용자가 만든 규칙이 기본 규칙보다 높은 우선 순위를 가질 경우, 사용자 규칙이 적용
5. **태그(Tags)**:
   * Azure NSG 규칙은 특정 Azure 리소스를 지정하기 위해 태그를 사용할 수 있다. 예를 들어, `VirtualNetwork`, `AzureLoadBalancer`, `Internet`과 같은 태그를 사용할 수 있다.

#### 예시 NSG 규칙

**인바운드 규칙 예시**

* 허용: TCP 80번 포트(HTTP)에서 들어오는 트래픽을 모든 소스 IP로부터 허용
* 차단: TCP 23번 포트(Telnet)에서 들어오는 트래픽을 모든 소스 IP로부터 차단

**아웃바운드 규칙 예시**

* 허용: TCP 443번 포트(HTTPS)로 나가는 트래픽을 모든 대상 IP로 허용
* 차단: 특정 IP 주소로 나가는 모든 트래픽 차단
