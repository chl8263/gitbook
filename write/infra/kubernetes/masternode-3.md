# MasterNode가 3개로 권장되는 이유

## Master Node

* **홀수로 3개 이상**이 권장
* 쿠버네티스 클러스터에서 마스터 노드는 클러스터의 상태를 관리하고, API 서버, 스케줄러, 컨트롤러 관리자 등의 핵심 컴포넌트를 실행한다
* 이러한 마스터 노드를 여러 개(보통 홀수, 3개 이상) 운영하면, 하나의 마스터 노드가 장애가 발생해도 다른 노드들이 클러스터의 상태를 유지할 수 있다
* 마스터 노드는 `etcd`를 통해 클러스터 상태를 관리하는데, `etcd`는 분산된 상태에서 합의를 이루기 위해 쿼럼(과반수 동의)을 필요로 한다&#x20;
* 홀수 개의 마스터 노드가 있을 때 쿼럼을 쉽게 달성할 수 있어, 클러스터의 안정성과 가용성을 보장할 수있다

## 쿼럼(Quorum) 이란?

### 쿼럼의 역할과 필요성

* **합의(Consensus):**
  * 분산 시스템에서는 여러 노드가 동일한 상태를 유지해야 한다 이를 위해 중요한 결정을 내릴 때 다수의 노드가 합의에 도달해야 하는데, 이 다수의 노드 집합을 쿼럼이라고 한다.
  * 예를 들어, 쿠버네티스의 `etcd`는 분산 키-값 저장소로, 클러스터의 상태 정보를 관리한다. 여러 마스터 노드에 분산된 `etcd`는 쿼럼을 통해 합의를 이루게 된다. 쿼럼을 충족하지 못하면, 시스템은 클러스터의 상태를 변경할 수 없다.
*   **장애 허용(Fault Tolerance):**

    * 쿼럼을 사용하면 일부 노드가 장애를 일으켜도 클러스터가 정상적으로 운영될 수 있다. 예를 들어, 3개의 노드가 있을 때, 쿼럼을 2개로 설정하면 1개의 노드가 장애가 발생해도 나머지 2개 노드가 합의를 통해 클러스터를 운영할 수 있다.


* 쿠버네티스에서 마스터 노드들은 `etcd`를 통해 클러스터 상태를 관리한다. 마스터 노드들이 많을수록 시스템의 가용성과 안정성이 높아지지만, 쿼럼을 통해 합의를 이루어야 하므로 노드 수는 홀수로 구성하는 것이 일반적이다.

{% hint style="info" %}
ex)

* **3개의 마스터 노드:**
  * 쿼럼은 2개로 설정. 하나의 노드가 다운되더라도 나머지 두 노드가 클러스터를 정상적으로 운영할 수 있다.
* **5개의 마스터 노드:**
  * 쿼럼은 3개로 설정. 두 노드가 다운되더라도 나머지 세 노드가 클러스터를 유지함.
{% endhint %}

## Worker Node

워커노드는 마스터 노드처럼 권장 노드 개수가 있는것은 아니다

* **홀수일 필요는 없다.**
* 워커 노드는 애플리케이션 파드를 실행하는 역할을 하며, 마스터 노드처럼 쿼럼이 필요하지 않다. 따라서 워커 노드의 개수는 2개, 4개, 6개 등 짝수여도 문제가 없다.
* 권장되는 워커 노드의 개수는 주로 클러스터의 워크로드, 가용성 요구 사항, 리소스 사용량에 따라 결정하면 된다.&#x20;
* 일반적으로 고가용성과 부하 분산을 위해 3개 이상의 워커 노드를 운영하는 것이 좋지만, 홀수로 유지해야 할 이유는 없다.

