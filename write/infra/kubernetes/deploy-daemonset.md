# Deploy와 DaemonSet의 차이 및 기타 배포형태

### 1. **Deployment**

* **목적**: 특정 수의 복제된 Pod를 클러스터 내에서 실행하고 관리하기 위해 사용된다
* **Pod 배포 방식**: Deployment는 지정된 개수의 Pod를 클러스터 내에 배포합니다. 클러스터의 여러 노드에 Pod를 분산하여 배치하지만, 모든 노드에 배포되는 것은 아니다.
* **롤링 업데이트**: Deployment는 롤링 업데이트(Rolling Update)를 통해 새로운 버전의 애플리케이션으로 점진적이고 무중단으로 전환할 수 있다. 하나씩 Pod를 교체하여 다운타임 없이 새로운 버전으로 전환한다.
* **수평적 확장(스케일링)**: Deployment는 필요에 따라 Pod의 수를 수평적으로 확장하거나 축소할 수 있다. 이를 통해 트래픽이 증가하면 더 많은 Pod를 배포하고, 감소하면 Pod의 수를 줄일 수 있다.
* **사용 사례**:
  * 웹 애플리케이션, API 서버 등 트래픽이 일정하지 않은 애플리케이션.
  * 롤링 업데이트가 필요한 경우.
  * 수평적 확장(스케일링)을 통해 애플리케이션의 부하를 처리해야 하는 경우.

### 2. **DaemonSet**

* **목적**: 클러스터의 모든 노드 또는 특정 노드 그룹에 하나의 Pod를 실행하기 위해 사용된다.
* **Pod 배포 방식**: DaemonSet은 클러스터 내의 모든 노드에 하나의 Pod를 배포한다. 새로운 노드가 클러스터에 추가되면, DaemonSet은 자동으로 그 노드에도 Pod를 배포한다.
* **롤링 업데이트**: DaemonSet도 롤링 업데이트를 지원하지만, 보통은 새로운 노드가 추가될 때마다 Pod를 자동으로 배포하는 데 더 중점을 둔다.
* **수평적 확장**: DaemonSet은 수평적 확장이 아닌, 클러스터 내의 모든 노드에 동일한 Pod를 배포하는 데 중점을 둔다. 특정 노드에만 배포하고자 할 때는 Node Selector, Node Affinity 등의 설정을 통해 조정할 수 있다.
* **사용 사례**:
  * 로그 수집기(예: Fluentd, Logstash), 모니터링 에이전트(예: Prometheus Node Exporter), 네트워크 플러그인(예: Calico, Flannel) 등 모든 노드에서 동일한 서비스를 제공해야 하는 경우.
  * 클러스터 전체에서 백그라운드 작업을 수행하는 에이전트를 배포할 때.
  * 특정 시스템 수준의 서비스가 모든 노드에서 실행되도록 할 때.

#### **비교 요약**

| **특징**        | **Deployment**      | **DaemonSet**                |
| ------------- | ------------------- | ---------------------------- |
| **Pod 배포 대상** | 클러스터 내에서 선택된 노드들    | 클러스터의 모든 노드 또는 특정 노드 그룹      |
| **Pod 수량 조정** | 지정된 개수로 수평적 확장 가능   | 노드 수에 따라 자동 배포               |
| **롤링 업데이트**   | 지원, 무중단 배포 가능       | 지원, 새로운 노드 추가 시 자동 배포        |
| **사용 사례**     | 웹 애플리케이션, API 서버 등  | 로그 수집기, 모니터링 에이전트, 네트워크 플러그인 |
| **주요 특징**     | 트래픽에 따라 수평 확장/축소 가능 | 클러스터 전체에서 동일한 Pod 실행         |

#### **결론**

* **Deployment**는 주로 애플리케이션이나 서비스의 수평적 확장과 무중단 배포를 위해 사용.
* **DaemonSet**은 클러스터의 모든 노드에서 동일한 작업을 수행하는 경우에 적합하며, 시스템 수준의 서비스나 노드 모니터링, 로그 수집 등의 작업을 수행할 때 사용

## 그외 배포형태

### 3. **StatefulSet**

* **목적**: 상태가 있는 애플리케이션을 관리하기 위해 사용된다. 이에는 데이터베이스, 메시지 큐, 분산 파일 시스템 등의 상태 저장(Stateful) 서비스가 포함된다.
* **특징**:
  * 각 Pod는 고유한 네트워크 ID와 영구적인 스토리지(Volume)를 가진다.
  * Pod의 순차적인 배포, 업데이트, 삭제가 보장된다.
  * Pod의 순서(0, 1, 2, ...)와 이름이 유지되므로 특정 Pod에 대한 참조가 가능
* **사용 사례**:
  * 데이터베이스 클러스터 (예: MySQL, Cassandra, MongoDB).
  * 분산 스토리지 시스템 (예: HDFS, Ceph).

### 4. **ReplicaSet**

* **목적**: 지정된 수의 복제된 Pod를 항상 실행되도록 보장하는 데 사용된다
* **특징**:
  * Deployment의 백엔드에서 동작하는 기본 구성 요소로 사용되며, 단독으로는 잘 사용되지 않는다
  * ReplicaSet은 특정 레이블을 가진 Pod의 개수를 유지함
* **사용 사례**:
  * Deployment와 결합하여 사용하며, 특정 상황에서는 단독으로 사용하여 Pod의 복제를 관리할 수 있다

### 5. **Job**

* **목적**: 단발성 작업을 실행하고 완료하기 위해 사용된다
* **특징**:
  * Job은 한 번 실행되어 성공적으로 완료된 후 종료
  * 지정된 작업이 완료될 때까지 하나 이상의 Pod를 생성하고 관리
* **사용 사례**:
  * 데이터 처리 작업 (예: 배치 작업).
  * 일회성 스크립트 실행.

### 6. **CronJob**

* **목적**: 정기적으로 반복 실행해야 하는 작업을 스케줄링하기 위해 사용
* **특징**:
  * CronJob은 Unix의 cron과 유사하게 일정에 따라 Job을 실행
  * 특정 시간 간격마다 Job을 실행하거나, 특정 시간에 Job을 실행하도록 설정할 수 있다.
* **사용 사례**:
  * 매일 밤 데이터 백업 작업.
  * 주기적인 로그 정리 작업.

### 7. ~~**ReplicationController**~~

* **목적**: ReplicaSet과 유사하게, 지정된 수의 Pod 복제를 보장하기 위해 사용
* **특징**:
  * ReplicaSet이 등장하기 전의 방식으로, 현재는 거의 사용되지 않으며, ReplicaSet이 이 기능을 대체
* **사용 사례**:
  * 최신 Kubernetes에서는 ReplicaSet으로 대체되었으므로, 사용이 권장되지 않는다.

### 8. **Horizontal Pod Autoscaler (HPA)**

* **목적**: 클러스터의 부하에 따라 Pod의 수를 자동으로 조정한다
* **특징**:
  * CPU 사용률 또는 사용자 정의 메트릭(예: 메모리 사용량, 응답 시간 등)에 따라 Pod 수를 조정
  * Deployment, ReplicaSet, StatefulSet 등과 함께 사용
* **사용 사례**:
  * 애플리케이션의 트래픽이 변동하는 경우 자동으로 Pod 수를 조정하여 성능을 최적화할 때.

