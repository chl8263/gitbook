# Deploy와 DaemonSet의 차이

#### 1. **Deployment**

* **목적**: 특정 수의 복제된 Pod를 클러스터 내에서 실행하고 관리하기 위해 사용됩니다.
* **Pod 배포 방식**: Deployment는 지정된 개수의 Pod를 클러스터 내에 배포합니다. 클러스터의 여러 노드에 Pod를 분산하여 배치하지만, 모든 노드에 배포되는 것은 아닙니다.
* **롤링 업데이트**: Deployment는 롤링 업데이트(Rolling Update)를 통해 새로운 버전의 애플리케이션으로 점진적이고 무중단으로 전환할 수 있습니다. 이는 하나씩 Pod를 교체하여 다운타임 없이 새로운 버전으로 전환할 수 있게 합니다.
* **수평적 확장(스케일링)**: Deployment는 필요에 따라 Pod의 수를 수평적으로 확장하거나 축소할 수 있습니다. 이를 통해 트래픽이 증가하면 더 많은 Pod를 배포하고, 감소하면 Pod의 수를 줄일 수 있습니다.
* **사용 사례**:
  * 웹 애플리케이션, API 서버 등 트래픽이 일정하지 않은 애플리케이션.
  * 롤링 업데이트가 필요한 경우.
  * 수평적 확장(스케일링)을 통해 애플리케이션의 부하를 처리해야 하는 경우.

#### 2. **DaemonSet**

* **목적**: 클러스터의 모든 노드 또는 특정 노드 그룹에 하나의 Pod를 실행하기 위해 사용됩니다.
* **Pod 배포 방식**: DaemonSet은 클러스터 내의 모든 노드에 하나의 Pod를 배포합니다. 새로운 노드가 클러스터에 추가되면, DaemonSet은 자동으로 그 노드에도 Pod를 배포합니다.
* **롤링 업데이트**: DaemonSet도 롤링 업데이트를 지원하지만, 보통은 새로운 노드가 추가될 때마다 Pod를 자동으로 배포하는 데 더 중점을 둡니다.
* **수평적 확장**: DaemonSet은 수평적 확장이 아닌, 클러스터 내의 모든 노드에 동일한 Pod를 배포하는 데 중점을 둡니다. 특정 노드에만 배포하고자 할 때는 Node Selector, Node Affinity 등의 설정을 통해 조정할 수 있습니다.
* **사용 사례**:
  * 로그 수집기(예: Fluentd, Logstash), 모니터링 에이전트(예: Prometheus Node Exporter), 네트워크 플러그인(예: Calico, Flannel) 등 모든 노드에서 동일한 서비스를 제공해야 하는 경우.
  * 클러스터 전체에서 백그라운드 작업을 수행하는 에이전트를 배포할 때.
  * 특정 시스템 수준의 서비스가 모든 노드에서 실행되도록 할 때.

#### **비교 요약**

| **특징**        | **Deployment**      | **DaemonSet**                |
| ------------- | ------------------- | ---------------------------- |
| **Pod 배포 대상** | 클러스터 내에서 선택된 노드들    | 클러스터의 모든 노드 또는 특정 노드 그룹      |
| **Pod 수량 조정** | 지정된 개수로 수평적 확장 가능   | 노드 수에 따라 자동 배포               |
| **롤링 업데이트**   | 지원, 무중단 배포 가능       | 지원, 새로운 노드 추가 시 자동 배포        |
| **사용 사례**     | 웹 애플리케이션, API 서버 등  | 로그 수집기, 모니터링 에이전트, 네트워크 플러그인 |
| **주요 특징**     | 트래픽에 따라 수평 확장/축소 가능 | 클러스터 전체에서 동일한 Pod 실행         |

#### **결론**

* **Deployment**는 주로 애플리케이션이나 서비스의 수평적 확장과 무중단 배포를 위해 사용됩니다.
* **DaemonSet**은 클러스터의 모든 노드에서 동일한 작업을 수행하는 경우에 적합하며, 시스템 수준의 서비스나 노드 모니터링, 로그 수집 등의 작업을 수행할 때 사용됩니다.

어떤 리소스를 사용할지는 애플리케이션의 특성과 요구사항에 따라 결정됩니다.
