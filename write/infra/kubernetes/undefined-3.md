# 기본구조



<figure><img src="../../../.gitbook/assets/image (47).png" alt=""><figcaption></figcaption></figure>

### 0. 개념

<figure><img src="../../../.gitbook/assets/Screenshot 2024-08-23 at 11.46.38 AM.png" alt=""><figcaption></figcaption></figure>

### 1. 마스터 노드 (Master Node)

* kubeadm
  * kubeadm은 쿠버네티스 클러스터를 간편하게 설치하고 구성할 수 있도록 도와주는 도구
  * 주로 클러스터를 처음부터 설정할 때 사용되며, 여러 복잡한 단계를 자동화하여 설치 과정을 단순화한다
  * 마스터 노드의 관리를위한것이므로 마스터 노드에서만 반드시 설치가 되어야 한다.
  * 주요기능&#x20;
    * **클러스터 초기화 (kubeadm init):** 마스터 노드를 초기화하고, 클러스터를 설정합니다. 초기화 과정에서 필요한 설정 파일과 인증서를 생성하고, 클러스터의 기본 구성 요소들을 배포합니다.
    * **노드 조인 (kubeadm join):** 워커 노드를 기존의 클러스터에 추가합니다. 마스터 노드에서 생성된 토큰을 사용하여 노드를 클러스터에 등록합니다.
    * **클러스터 업그레이드:** 클러스터의 버전을 업그레이드하는 기능을 제공합니다. `kubeadm upgrade` 명령을 통해 쿠버네티스 클러스터를 최신 버전으로 쉽게 업그레이드할 수 있습니다.
    * **클러스터 상태 점검:** 클러스터의 상태를 점검하고 문제를 해결하는 도구를 제공합니다. `kubeadm reset` 명령을 통해 클러스터 구성을 초기화할 수도 있습니다.
* kubectl
  * 기본적으로 마스터 노드와 소통하며, 관리자가 마스터 노드를 제어하고 관리할 때 사용할 때 사용한다
  * Kubernetes 클러스터와 상호작용하고 클러스터의 리소스를 관리하는 강력한 커맨드라인 도구
  * 이를 통해 개발자와 시스템 관리자는 애플리케이션을 배포하고, 클러스터 상태를 모니터링하며, 다양한 관리 작업을 수행할 수 있다
* CNI
  * container간 통신을 지원하는것
  * Pod network이라고도 부름
  * &#x20;ex) 플라넬, 칼리코, 위브넷 등 많은 플레그인들이 있다
  * 반드시 있어야 pod끼리 통신이 가능하므로 필수적으로 설치해야한다

### 1. 마스터 노드 (Master Node)

마스터 노드는 클러스터를 제어하고 관리하는 역할을 합니다. 주요 구성 요소는 다음과 같습니다

* **API 서버 (kube-apiserver):** 클러스터의 중앙 관리 지점으로, 쿠버네티스 API를 통해 모든 관리 명령을 처리합니다.
* **컨트롤러 관리자 (kube-controller-manager):** 클러스터 상태를 원하는 상태로 유지하기 위해 다양한 컨트롤러를 실행합니다.
* **스케줄러 (kube-scheduler):** 새로운 Pod를 적절한 노드에 할당하는 역할을 합니다.
* **ETCD:** 모든 클러스터 데이터를 저장하는 고가용성 키-값 저장소입니다.

### 2. 노드 (Node)

노드는 컨테이너화된 애플리케이션을 실행하는 워커 머신입니다. 주요 구성 요소는 다음과 같습니다:

* **쿠버네티스 노드 에이전트 (kubelet):** 각 노드에서 실행되며, API 서버와 통신하여 명령을 수신하고, 컨테이너의 상태를 모니터링합니다.
* **쿠버네티스 네트워킹 프록시 (kube-proxy):** 네트워크 프록시 및 로드 밸런서 역할을 하여 쿠버네티스 서비스 간의 네트워크 통신을 관리합니다.
* **컨테이너 런타임:** 실제로 컨테이너를 실행하는 소프트웨어로, Docker, containerd 등이 있습니다.

### 3. 파드 (Pod)

파드는 쿠버네티스에서 배포 가능한 최소 단위로, 하나 이상의 컨테이너를 포함할 수 있습니다. 동일한 네트워크 네임스페이스를 공유하며, 보통 하나의 컨테이너로 구성됩니다.

### 4. 서비스 (Service)

서비스는 파드의 논리적 집합을 정의하고 접근을 가능하게 하는 네트워크 서비스입니다. 로드 밸런싱을 제공하고 파드 간의 통신을 관리합니다.

### 5. 네임스페이스 (Namespace)

네임스페이스는 클러스터 내의 리소스를 분리하고 관리하기 위한 논리적 구획입니다. 서로 다른 프로젝트나 팀의 리소스를 격리할 때 유용합니다.

### 6. 디플로이먼트 (Deployment)

디플로이먼트는 애플리케이션의 상태를 선언적으로 관리하는 구성 요소입니다. 새로운 파드를 생성하거나 기존 파드를 업데이트하고, 롤백과 확장을 자동화합니다.

### 7. 컨피그맵 (ConfigMap) 및 시크릿 (Secret)

* **ConfigMap:** 설정 파일이나 환경 변수를 저장하고 파드에 주입하는 데 사용됩니다.
* **Secret:** 암호, 토큰 등의 민감한 데이터를 저장하고 안전하게 파드에 전달하는 데 사용됩니다.





