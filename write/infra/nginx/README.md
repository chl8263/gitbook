# Nginx

### Apache 의 10K 문제로 인해 Nginx 개발을 시작하게 됨

> C10K는 "Concurrent 10,000 Connections"의 약어로, 동시에 10,000개의 연결을 처리할 수 있는 능력을 의미한다.

### 당시 Apache의 I/O 방식 처리

* 싱글 스레드에서 CPU 작업과 I/O 작업을 모두 처리하기 떄문에 I/O 작업이 끝날 때까지 기다려야 함
* 각 요청은 새로운 프로세스나 스레드에서 처리되었다
* Apache는 많은 연결을 다루기 위해 많은 프로세스 또는 스레드를 생성했다. 이로 인해 많은 메모리와 CPU 자원을 소비함
* Apache는 작은 규모의 연결을 다루는 데에는 효과적이지만, 동시에 많은 연결을 처리할 때는 성능이 저하다

Apache는 C10K 문제를 해결하기 위해 멀티 프로세스나 스레드를 사용하고, Keep-Alive 연결을 통해 연결 유지 지원하는 것으로 문제를 해결하긴 했다.

웹 기술의 발전과 함께 웹 서버에 대한 요구 사항도 증가했고, 동시에 많은 연결을 처리해야 하는 경우가 늘어났다

***

### Nginx 란

* Nginx는 이벤트 기반 아키텍처를 사용하며 비동기적인 방식으로 요청을 처리한다. 단일 스레드에서 여러 연결을 다루고 비동기 I/O를 통해 효율적으로 작동한다
* Nginx는 단일 프로세스에서 여러 연결을 처리하기 때문에 메모리 사용량이 적다.&#x20;
* 또한 비동기적인 작업을 통해 CPU를 효율적으로 활용한다.
* Nginx는 이벤트 기반 아키텍처와 비동기적인 작업을 통해 많은 연결을 효과적으로 처리한다.&#x20;
* 따라서 높은 부하에서도 성능이 유지됨

### Nginx 작동원리

* Nginx는 하나의 master process와 다수의 Worker Process로 구성될 수 있다.&#x20;
* master process는 설정 파일을 읽고 설정에 맞게 worker process를 생성한다.
* &#x20;이 worker process가 생성될 때 각자 지정된 listen 소켓을 배정받는다.
* &#x20;그리고 그 소켓에 클라이언트의 여러 요청들을 받고 처리할 수 있다.&#x20;
* 이런 connection 형성, 제거, 새로운 요청을 처리하는 것을 event라고 한다.

### Nginx 의 기능

Nginx는 웹 서버로 널리 사용되지만, 단순히 웹 서버로만 사용되는 것이 아니라 리버스 프록시, 로드 밸런서, 캐시 서버 등 다양한 역할을 수행할 수 있다.

1.  **웹 서버**:&#x20;

    Nginx는 정적 파일 및 동적 콘텐츠를 제공하는 강력한 웹 서버로 기능한다.&#x20;

    HTTP 및 HTTPS 프로토콜을 지원하며, 가벼우면서도 빠른 응답 시간을 제공.
2. **리버스 프록시**: Nginx는 웹 애플리케이션 서버와 클라이언트 간의 중개자로서 역할을 할 수 있습니다. 클라이언트 요청을 받아서 백엔드 서버로 전달하고, 백엔드 서버의 응답을 클라이언트에게 반환합니다.
3. **로드 밸런싱**: Nginx는 여러 서버 간의 부하를 분산시키는 로드 밸런서로 사용될 수 있습니다. 부하 분산을 통해 서버 응답 시간을 최적화하고, 가용성과 신뢰성을 향상시킬 수 있습니다.
4. **캐싱**: Nginx는 정적 콘텐츠 및 동적 콘텐츠의 캐싱을 지원합니다. 캐싱을 통해 반복적인 요청에 대한 응답 시간을 줄이고, 서버 부하를 줄일 수 있습니다.
5. **보안 기능**: Nginx는 다양한 보안 기능을 제공합니다. SSL/TLS를 통한 데이터 암호화, HTTP 요청 헤더 필터링, 웹 어플리케이션 방화벽 등의 기능을 지원하여 보안을 강화할 수 있습니다.
6. **HTTP/2 지원**: Nginx는 HTTP/2 프로토콜을 지원하여 더 빠르고 효율적인 웹 페이지 로딩을 가능하게 합니다.
7. **동적 모듈 시스템**: Nginx는 모듈 시스템을 통해 추가적인 기능을 동적으로 로드할 수 있습니다. 이를 통해 사용자는 필요한 기능을 선택하여 적용할 수 있습니다.
8. **웹소켓 지원**: Nginx는 웹소켓 프로토콜을 지원하여 실시간 통신 애플리케이션을 구현할 수 있습니다.
