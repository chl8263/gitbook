# 예외

## 1. Java 의 checked 예외

* 컴파일러가 어떤 처리를 제대로 하느지 확인해줌
* 어느 메서드가 어떤 예외를 던지는지 명확히 알 수 있음
* try-catch 블록을 사용하거나 예외를 메소드 시그니처에 throws 절로 선언하여 예외를 처리하지 않으면 컴파일 오류
* Exception 클래스를 상속하면 모두 checked 예외
* 종류
  * IOException
  * SQLException
  * TimeoutException

## 2. Java 의 unchecked 예외

* RuntimeException을 상속
* 컴파일러가 따로 검사를 안해서 unchecked 예외
* RuntimeException 클래스를 상속하면 모두 unchecked 예외
* 종류&#x20;
  * NullPointerException
  * ArrayIndexOutOfBoundsException
  * ClassCastException
  * etc..

## 3. Checked 예외의 의의

* checked 예외로 만들었다면 어떻게든 이 예외를 고쳐서 다시 프로그램이 회복하게 하라 라는 뜻.&#x20;

## 4. 예외 는 어떻게 처리하는게 좋나?

### => 모든 예외는 Exception으로 한번에 잡자.

* 모든 Flow에서 예외를 처리할 수 없다.
* 각 함수 단계마다 예외를 처리하면 해당 단계에서 실행할 복구 예외 코드를 만들기도 힘듦
* 꼭 원상복구를 해냐하나? 하다가 실수가 발생할 수 있다. 그냥 종료하는 것도 방법
* 그래서 main() 함수에서 한번만 -> 크게 하나만 잡자
* 다시 예외를 던지는 일도 훨씬 적어짐
* 무조건 회복하라 => 이 말은 너무 오바임..
* 예외로부터 무조건 안전한 프로그래밍을 하면..?
  * 프로그램이 이상한 상태에 빠져 더 큰 문제가 생길 수도 있다.
  * 이런 상태의 프로그램을 흔히 좀비 프로그램 이라고 함
* 여전히 던질때는 세세한 예외형을 던짐 (커스텀 예외 포함)
* catch를 Exception으로 한번에 하자
* runtime exception 으로 무조건 던지자 라는 말도 있음

## 5. 제어흐름 용으로 예외를 사용하지 말라

* 절대 다음에 실행할 코드를 결정하는 용도로 쓰지말라
* 함수 범위에서 점프하는 호출스택 어디로도 점프가능
* 욕 존나 먹는 방법임
* 예
  * 재귀함수 중간에 exception 으로 함수 종료하기

## 6. 오류 사항을 피하는게 제일 좋다

* 처음부터 문제 없는 코드가 최고
* 최대한 많은 데이터의 경우의 수를 파악하라
* 내 시스템 안에 들어온 데이터는 언제나 유효 - 이런 마음으로 작업하라
  * 예외 상황을 고려할 필요가 없음
  * 예외 상황이 발생하면 그건 버그
  * 깊은 함수 호출이 있어도 복잡하지 않음
* 남으로부터 받아오는 데이터
  * 언제든 유효하지 않을 수 있음
  * 외부로부터 들어오는 데이터 경계에서 반드시 검증
  * 잘못된 데이터는 경계에서 곧바로 거부
  * 남에게 문제가 있다고 알려줌
* 남에게 문제를 알려주는 방법
  * 참, 거짓 혹은 NULL 을 반환
  * 오류코드 를 반환
  * 예외를 던짐

## 7. 예외를 처리하는 4가지 방법

### 1) 무시한다

* 프로그램 다음 중 한 가지 일이 방생
  * 곧바로 크래시
  * 일단은 작동하지만 언젠가는 크래시
  * 안정적이지 못한 상태로 계속 동작
    * 이 경우가 제일 위험...
    * 데이터가 망가진 상태일 수 있다..

### 2) 미리 검사 후 프로그램을 종료한다

* 어떤 문제가 있었는지 사용자에게 보여주고 정상종료
  * &#x20;주로 팝업 창이나 로그파일
* 사용자는 문제가 있었군! 이라고 생각하고 다시 프로그램을 실행
* 크래시에 비해 나은 점
  * 제대로 시스템 상태를 정리하고 프로그램을 종료할 가능성이 높다
  * 프로그램 종료 후 시스템이 좀 더 안정적일 가능성이 높다
* 작업하던 내용을 날리지 않고 저장해 줄 수 있다.

### 3)  미리 검사 후 문제를 고친다

* 사용자에게 올바름 값을 입력하라고 다시 요청
* 입력값 검증 방법
* 설계외 필요한 성능 수준에 따라 OOP 에서도 충분히 좋은 방법
* 단점
  * 문제가 처음 방생한 곳을 파악하지 쉽지 않음
  * 문제가 발생했다는 사실조차 모른 채 오랜 시간이 흐를 수 있음

### 4) 예외를 던진다

* 문제가 발생했다는 사실을 알려줄 수 있다
* 그 예외를 처리할 수 있다.
* 내 코드가 아닌 남에게 그냥 던지는 예외는남에게 폭탄 돌리는 꼴 ...&#x20;

## 8. 예외는 OOP 의 일부가 아니다

## 9. 잘못된 예외처리보다 크래시가 낫다

* 잘못처리하면 크래시가 안 나고 프로그램이 계속 실행되곤 함
* 이 때 츠로그램의 상태는 안정적이지 않기 쉬움
* 즉, 잘못된 예외처리가 크래시보다 더 위험
* 요즘은 자동 세이브 기능의 구현으로 크래시에 신경을 예전보다 덜 씀
* 크래시가 나서 곧바로 메모리 덤프가 생김 예외보다는 메모리 덤프가 더 정보가 많다.
  * java 에서는 하지만 메모리 덤프 지원이 정말 미미함

## 10. 실행중에 문제를 고치려 한다고 프로그램의 안정성이 높어지는 건 아니다.

* 좀비가 되면 그게 더 큰 문제
