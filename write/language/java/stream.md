# Stream

## 1. Stream : 데이터 처리 연산을 지원하도록 소스에서 추출된 연속된 요소

* 언제 테이터를 계산하느냐가 컬렉션과 스트림의 가장 큰 차이
* 컬렉션은 현재 자료구조가 포함하는 모든 값을 머모리에 저장하는 자료구조
  * 즉, 컬렉션의 모든 요소는 컬렉션에 추가하기 전에 계산되어야 한다
* 스트림은 요청할 때만 요소를 계산하는 고정된 자료구조다.
* 스트림은 스트림 내의 요소를 쉽게 병렬로 처리할 수 있는 환경을 제공한다
* 자바 개발자는 컬렉션 데이터 처리 속로를 높이려고 따로 고민할 필요가 없다
  * 무엇보다도 컴퓨터의 멀티코어를 활용해서 파이프라인 연산을 실행할 수 있다는 점이 가장 중요한 특징이다
  * 스트림은 병렬처리를 지원하기 때문

## 2. 병렬 Stream

병렬 스트림이란 각각의 스레드에서 처리할 수 있도록 스트림 요소를 여처 청크로 분할한 스트림이다.&#x20;

따라서 병렬 스트림을 이용하면 모든 멀티코어 프로세서가 각각의 청크를 처리하도록 할당할 수 있다.

* 컬렉션을 필터링할 수 있는 가장 빠른 방법은 컬렉션을 스트림으로 바꾸고, 병렬로 처리한 다음에, 리스트로 다시 복원하는 것이다.

<figure><img src="../../../.gitbook/assets/Screenshot 2024-04-05 at 2.52.23 PM.png" alt=""><figcaption></figcaption></figure>

* 하지만 병렬은 공짜가 아님.
  * 병렬화를 이용하려면 스트림을 재귀적으로 분할하고 각 서브스트림을 서로 른 스레드의 리듀싱 연산으로 할당하, 이들 경ㄹ과를 하나의 값으로 합쳐야 한다.&#x20;
  * 멀티코어간의  데이터 이동은 생각보다 비싸다.
  * 코어간 데이터 전송 시간보다 훨씬 오래 걸리는 작업만 병렬로 다른 코어에;서 수행하는 것이 바람직하다.
  * 병렬을 이요해서 빠르게 하고 싶으면 항상 병렬화를 올바르게 사용하고 있는지 확인하라.
  * 그리고 병렬처리를 사용한다면 꼭 함수 벤치마킹을 해볼것
